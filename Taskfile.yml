# https://taskfile.dev

version: '3'

vars:
  GREETING: Welcome to NL Web!

tasks:
  check:
    cmds:
      - python azure-connectivity.py 
    dir: ./code
  app:
    cmds:
      - python app-file.py
    dir: ./code
  deploy:openai:
    cmds:
      - ./setup.sh -d
    dir: ./scripts
  deploy:web:
    cmds:
      - ./deploy_webapp_azure.sh -d
    dir: ./scripts
  cleanup:
    cmds:
      - ./remove.sh
    dir: ./scripts
  foundry:
    cmds:
      - ./view.sh
    dir: ./scripts
  run:
    cmds:
       - task: deploy:openai
       - task: check
       - task: app
    dir: ./infra
  default:
    cmds:
      - echo "{{.GREETING}}"
    silent: true
